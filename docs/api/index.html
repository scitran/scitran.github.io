<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Scitran.github.io : ">

    <link rel="stylesheet" type="text/css" media="screen" href="../../tech/stylesheets/stylesheet.css">

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="../../tech/javascripts/smooth-scroll.js"></script>

    <title>API Documentation</title>
  </head>

<body>
  <div id="container" class="container">
    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/scitran/api">View on GitHub</a>

          <a href="/"><h1 id="project_title">Scientific Transparency</h1></a>
          <h2 id="project_tagline">Saving Science. Starting with Neuroscience.</h2>

        </header>
    </div>

    <!-- SIDEBAR BEGIN -->
    <div id="sidebar">
      <div id="header_wrap" class="outer">
        <div class="inner">
          <strong><a href="/docs"><span style="color:white">Documentation:</a>&nbsp; API</strong>
        </div>
      </div>
      <div id="sidebar_content">
        <p><a href="#">API</a></p>
        <p><a href="#hierarchy">Data Hierarchy</a></p>
        <p><a href="#authentication">Authentication</a></p>
        <p><a href="#initialization">Initialization Flow</a></p>
        <p><a href="#endpoints">Endpoints</a>
          <ul>
            <small>
              <li><a href="#ep_sites">/sites</a></li>
              <li><a href="#ep_groups">/groups</a></li>
              <li><a href="#ep_project_g">/projects/groups</a></li>
              <li><a href="#ep_projects_gid">/projects?group=&lt;GROUP_ID&gt;</a></li>
              <li><a href="#ep_projects_pid">/projects/&lt;PROJECT_ID&gt; </a></li>
              <li><a href="#ep_projects_pid_s">/projects/&lt;PROJECT_ID&gt;/sessions</a></li>
              <li><a href="#ep_sessions_sid">/sessions/&lt;SESSION_ID&gt;</a></li>
              <li><a href="#ep_sessions_sid_a">/sessions/&lt;SESSION_ID&gt;/acquisitions </a></li>
              <li><a href="#ep_acquisitions_aid">/acquisitions/&lt;ACQUISITION_ID&gt;</a></li>
            </small>
          </ul>
        </br>  
      </div>

      </p>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">

        <h2 id="top">API Documentation</h2>

          <h3 id="hierarchy">Data Hierarchy</h3>
          <p>
            The data container hierarchy is: <br>
            <ul>
              <li> PROJECT</li>
                <ul>
                  <li> SESSION</li>
                    <ul>
                      <li> ACQUISITION</li>
                    </ul>
                </ul>
            </ul>
          </p>
          <p>
            Each data container is exposed in the API as a set of endpoints for querying and updating metadata as well as uploading, downloading, and deleting files.
          </p>
          <p>
            Each data container is embodied as a database document, including user-defined sub-documents, for metadata storage and a file system directory for file storage. The fact that all files associated with a data container are stored in a single directory puts a natural uniqueness criterion on filenames.
          </p>
          <h3 id="authentication">Authentication</h3>
          <p>In order to submit authenticated requests to the API, one must first obtain an OAuth token from an OAuth provider and attach it to all subsequent API requests by setting the <code>Authorization</code> HTTP header to the value of the token. The API will either answer the request or, if the token is invalid, will issue a <code>401 "invalid oauth2 token"</code> response.

          <h3 id="initialization">Initialization Flow </h3>
            <p>The first call to the API should be <code>GET /users/self</code> to verify that authentication was successful and that the user exists in system.</p>

            <p>A subsequent data retrieval flow might include the following requests:
            <ul>
            <li><code>GET /sites</code> returns the list of registered SciTran instances.</li>
            <li><code>GET /groups</code> returns the list of groups that the user is a member of.</li>
            <li><code>GET /projects/groups</code> returns the list of groups that are owners of projects that the user has access to. </li>
            <li><code>GET /projects?group=&lt;GROUP_ID&gt;</code> returns the list of projects that a user has access to, optionally restricted by group ID. </li>
            <li><code>GET /projects/&lt;PROJECT_ID&gt;</code> returns the complete metadata for a given project.</li>
            <li><code>GET /projects/&lt;PROJECT_ID&gt;/sessions</code> returns the list of sessions for a given project.</li>
            <li><code>GET /sessions/&lt;SESSION_ID&gt;</code> returns the complete metadata for a given session.</li>
            <li><code>GET /sessions/&lt;SESSION_ID&gt;/acquisitions</code> returns the list of acquisitions for a given sesssion.</li>
            <li><code>GET /acquisitions/&lt;ACQUISITION_ID&gt;</code> returns the complete metadata for a given acquisition.</li>
            </ul>

            <p>

          <h3 id="endpoints">Endpoints</a></h3>
          <p> API endpoints and methods for each.</p>

            <h4 id="ep_sites">/sites</h4>
              <div id="sec_indent">
                <h5>GET</h5>
                <h5>PUT</h5>
                <h5>POST</h5>
                <h5>DELETE</h5><p></p>
              </div>

            <h4 id="ep_groups">/groups</h4>
              <div id="sec_indent">
                <h5>GET</h5>
                <h5>PUT</h5>
                <h5>POST</h5>
                <h5>DELETE</h5><p></p>
              </div>

            <h4 id="ep_project_g">/projects/groups</h4>
              <div id="sec_indent">
                <h5>GET</h5>
                <h5>PUT</h5>
                <h5>POST</h5>
                <h5>DELETE</h5><p></p>
              </div>

            <h4 id="ep_projects_gid">/projects?group=&lt;GROUP_ID&gt;</h4>
              <div id="sec_indent">
                <h5>GET</h5>
                <h5>PUT</h5>
                <h5>POST</h5>
                <h5>DELETE</h5><p></p>
              </div>

            <h4 id="ep_projects_pid">/projects/&lt;PROJECT_ID&gt;</h4>
              <div id="sec_indent">
                <h5>GET</h5>
                <h5>PUT</h5>
                <h5>POST</h5>
                <h5>DELETE</h5><p></p>
              </div>

            <h4 id="ep_projects_pid_s">/projects/&lt;PROJECT_ID&gt;/sessions</h4>
              <div id="sec_indent">
                <h5>GET</h5>
                <h5>PUT</h5>
                <h5>POST</h5>
                <h5>DELETE</h5><p></p>
              </div>

            <h4 id="ep_sessions_sid">/sessions/&lt;SESSION_ID&gt;</h4>
              <div id="sec_indent">
                <h5>GET</h5>
                <h5>PUT</h5>
                <h5>POST</h5>
                <h5>DELETE</h5><p></p>
              </div>

            <h4 id="ep_sessions_sid_a">/sessions/&lt;SESSION_ID&gt;/acquisitions</h4>
              <div id="sec_indent">
                <h5>GET</h5>
                <h5>PUT</h5>
                <h5>POST</h5>
                <h5>DELETE</h5><p></p>
              </div>

            <h4 id="ep_acquisitions_aid">/acquisitions/&lt;ACQUISITION_ID&gt;</h4>
              <div id="sec_indent">
                <h5>GET</h5>
                <h5>PUT</h5>
                <h5>POST</h5>
                <h5>DELETE</h5><p></p>
              </div>
            <!--
            <h4 id="ep_ID">SectionName</h4>
              <div id="sec_indent">
                <h5>GET</h5>
                <h5>PUT</h5>
                <h5>POST</h5>
                <h5>DELETE</h5><p></p>
              </div>
            -->

      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">

        <table style="width:100%; border:none;">
          <tr>
          <td style="width:30%;"><h5 style="color:#eeeeee; border-bottom:-10px">ABOUT</h5></td>
          <td style="width:40%; color:#eeeeee; border-bottom:10px; text-align:center"><h3><a href="#header_wrap">&#8613;</a></h3></td>
          <td style="width:30%; text-align:right;"><h5 style="color:#eeeeee; border-bottom:10px">PAGES</h5></td>
          </tr>
          <tr>
            <td>
              <ul>
                <li><a href="../#team">Team</a> </li>
                <li><a href="//post.stanford.edu/contact">Contact</a></li>
                <li><a href="//post.stanford.edu">Project on Scientific Transparency</a> </li>
              </ul>
           </td>
            <td style="width:30%; text-align:center; "> <small><em>SDM is open-source software, released under the MIT license.</em></small> </td>
            <td style="text-align:right;">
              <ul>
                <li><a href="/"> SciTran Home</a></li>
                <li><a href="/tech"> Technology</a></li>
                <li><a href="/docs"> Documentation</a></li>
              </ul>
            </td>
          </tr>
         </table>

      </footer>
    </div>
</div>
  </body>
</html>
